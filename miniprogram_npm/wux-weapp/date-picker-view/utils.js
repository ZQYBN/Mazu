"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fomartArray=fomartArray,exports.getDaysInMonth=getDaysInMonth,exports.pad=pad,exports.cloneDate=cloneDate,exports.setMonth=setMonth,exports.isTillNow=isTillNow,exports.isInvalidDate=isInvalidDate,exports.convertStringArrayToDate=convertStringArrayToDate,exports.convertDateToStringArray=convertDateToStringArray,exports.isDateString=exports.makePattern=exports.modeRecord=exports.TILL_NOW=exports.ONE_DAY=exports.YEAR=exports.MONTH=exports.TIME=exports.DATE=exports.DATETIME=void 0;var _warning=_interopRequireDefault(require("../helpers/libs/warning"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function _construct(t,e,r){return(_construct=isNativeReflectConstruct()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var a=new(Function.bind.apply(t,n));return r&&_setPrototypeOf(a,r.prototype),a}).apply(null,arguments)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}var DATETIME="datetime";exports.DATETIME=DATETIME;var DATE="date";exports.DATE=DATE;var TIME="time";exports.TIME=TIME;var MONTH="month";exports.MONTH=MONTH;var YEAR="year";exports.YEAR=YEAR;var ONE_DAY=864e5;exports.ONE_DAY=ONE_DAY;var TILL_NOW="TILL_NOW";function fomartArray(t,e){for(var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,n=t,a=[];n<=e;)a.push(n),n+=r;return a}function getDaysInMonth(t){return new Date(t.getFullYear(),t.getMonth()+1,0).getDate()}function pad(t){return t<10?"0".concat(t):t+""}function cloneDate(t){return new Date(+t)}function setMonth(t,e){t.setDate(Math.min(t.getDate(),getDaysInMonth(new Date(t.getFullYear(),e)))),t.setMonth(e)}function isTillNow(t){return t&&(t.tillNow||t[0]===TILL_NOW)}exports.TILL_NOW=TILL_NOW;var modeRecord={datetime:"yyyy-MM-dd hh:mm",date:"yyyy-MM-dd",year:"yyyy",month:"yyyy-MM",time:"hh:mm"};exports.modeRecord=modeRecord;var makePattern=function(t){return new RegExp("^".concat(t.replace(/[a-zA-Z]/g,"\\d"),"$"))};exports.makePattern=makePattern;var isDateString=function(e){return Object.keys(modeRecord).some(function(t){return makePattern(modeRecord[t]).test(e)})};function isInvalidDate(t){return isNaN(Date.parse(t))&&isNaN(new Date(t).getTime())}function convertStringArrayToDate(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(isTillNow(t))return new Date;if(!Array.isArray(t)){var r=t;if("string"==typeof t&&isDateString(t)){var n=new Date;makePattern(modeRecord.year).test(t)&&(t="".concat(t,"-").concat(n.getMonth(),"-").concat(n.getDate())),makePattern(modeRecord.month).test(t)&&(t="".concat(t,"-").concat(n.getDate())),makePattern(modeRecord.time).test(t)&&(t="".concat(n.getFullYear(),"-").concat(n.getMonth(),"-").concat(n.getDate()," ").concat(t)),t=t.replace(/\-/g,"/")}else isNaN(parseInt(t))||(t=parseInt(t));var a=new Date(t);return isInvalidDate(a)?((0,_warning.default)(!1,"".concat(r," not a date.")),new Date):a}var o,i,s,c,u,p,l,D,y=e.mode,f=e.use12Hours,T=(o=t,i=y,s=new Date,c=s.getFullYear(),u=s.getMonth(),p=s.getDate(),i===DATETIME?[o[0]?parseInt(o[0]):c,o[1]?parseInt(o[1]):0,o[2]?parseInt(o[2]):1,o[3]?parseInt(o[3]):0,o[4]?parseInt(o[4]):0,0]:i===TIME?[c,u,p,o[0]?parseInt(o[0]):0,o[1]?parseInt(o[1]):0,0]:i===DATE?[o[0]?parseInt(o[0]):c,o[1]?parseInt(o[1]):0,o[2]?parseInt(o[2]):1,0,0,0]:i===MONTH?[o[0]?parseInt(o[0]):c,o[1]?parseInt(o[1]):0,1,0,0,0]:i===YEAR?[o[0]?parseInt(o[0]):c,0,1,0,0,0]:void 0);if(f&&(y===TIME||y===DATETIME)){var d=(l=t,(D=y)===DATETIME?l[5]?String(l[5]):"0":D===TIME?l[2]?String(l[2]):"0":void 0),g=parseInt(T[3]);g="1"===d?(g<=12&&(g+=12),24<=g?0:g):(0===g&&(g=12),12<g&&(g-=12),12<=g?0:g),T.splice(3,1,g)}return _construct(Date,_toConsumableArray(T))}function convertDateToStringArray(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!t)return[];var r=e.mode,n=e.use12Hours,a=[];if(r===YEAR&&(a=[t.getFullYear()+""]),r===MONTH&&(a=[t.getFullYear()+"",t.getMonth()+""]),r!==DATETIME&&r!==DATE||(a=[t.getFullYear()+"",t.getMonth()+"",t.getDate()+""]),r===DATETIME||r===TIME){var o=t.getHours(),i=t.getMinutes(),s=[o+"",i+""];n&&(s=[(0===o?12:12<o?o-12:o)+"",i+"",(12<=o?1:0)+""]),a=a.concat(s)}return a}exports.isDateString=isDateString;