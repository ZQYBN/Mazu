"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _debounce=require("../shared/debounce"),_throttle=require("../shared/throttle"),_isEmpty=require("../shared/isEmpty");function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bindFunc(e,t,n){var i=e[t];e[t]=function(e){n&&n.call(this,e,_defineProperty({},t,!0)),i&&i.call(this,e)}}var methods=["linked","linkChanged","unlinked"],extProps=["observer"],isNamePath=function(e){return/^..\//.test(e)},_default=Behavior({lifetimes:{created:function(){this.useThrottleFn=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length?arguments[2]:void 0,i=(0,_throttle.throttle)(e.bind(this),t,n);return this._throttledFns.push(i),{run:i,cancel:i.cancel,flush:i.flush}},this._throttledFns=[],this.callDebounceFn=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length?arguments[2]:void 0;return(this._debounced=this._debounced||(0,_debounce.debounce)(e.bind(this),t,n)).call(this)},this._debounced=null},detached:function(){this._debounced&&this._debounced.cancel&&this._debounced.cancel(),0<this._throttledFns.length&&(this._throttledFns.forEach(function(e){e.cancel()}),this._throttledFns=[])}},definitionFilter:function(e){var i=e.relations;if(!(0,_isEmpty.isEmpty)(i)){var t=function(e){var t=i[e];methods.forEach(function(e){return bindFunc(t,e,t.observer)}),extProps.forEach(function(e){return delete t[e]})};for(var n in i)t(n)}Object.assign(e.methods=e.methods||{},{getRelations:function(e){var t=this,n=0<arguments.length&&void 0!==e?e:["parent","child","ancestor","descendant"];return(0,_isEmpty.isEmpty)(i)?[]:Object.keys(i).map(function(e){return i[e]&&n.includes(i[e].type)?e:null}).filter(function(e){return!!e}).map(function(e){return t.getRelationsByName(e)[0]}).filter(function(e){return!!e})},getRelationsByName:function(e){return this.getRelationNodes(isNamePath(e)?e:"../".concat(e,"/index"))},getRelationsByType:function(e){return this.getRelations([e])},querySelector:function(e){return this.selectComponent(e)},querySelectorAll:function(e){return this.selectAllComponents(e)}})}});exports.default=_default;